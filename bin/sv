#!/usr/bin/env ruby

require 'smallvictories'

def help
  %Q(
  Usage: sv [COMMAND] [OPTIONS]
  Commands:
    watch               Watch for changes and compile files
    help                Prints this help document
    version             Prints the small victories gem version
  Options:
    -h, --help          Prints this help document
    -v, --version       Prints the siteleaf gem version
  See https://github.com/xxix/smallvictories-gem for additional documentation.
  )
end

def watch
  config = SmallVictories::Configuration.new
  config.setup
  compiler = SmallVictories::Compiler.new(config: config)
  watcher = SmallVictories::Watcher.new(compiler: compiler)
  watcher.watch
end

case ARGV[0]
when '-v', '--version', 'version'
  puts SmallVictories::VERSION
when '-h', '--help', 'help'
  puts help
when 'hello'
  hello
when 'watch'
  watch
else
  puts "`#{ARGV[0]}` command not found.\n"
  puts help
end
